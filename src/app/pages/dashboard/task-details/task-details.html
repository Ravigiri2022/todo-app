<div
  id="bgpopup"
  class="absolute inset-0 z-30 flex items-center justify-center fade-in backdrop-blur-[3px]"
  (click)="onClose()"
>
  @if(updateTask()){
  <app-add-task (close)="openUpdateTask()" [newTask]="task" title="update"></app-add-task>
  }
  <div
    id="popupz"
    class="bg-white/93 border flex flex-col border-white/20 rounded-3xl shadow-2xl w-[40%] h-[70%] p-8 z-40 bottom-slide-up backdrop-blur-2xl"
    (click)="$event.stopPropagation()"
  >
    <!-- Header -->
    <div class="flex items-center justify-between mb-6">
      <h2
        class="bbh-sans-hegarty-regular text-3xl font-semibold bg-gradient-to-r from-[#5fa8fb] to-[#c178e9] bg-clip-text text-transparent"
      >
        Task Details
      </h2>

      <button
        (click)="openUpdateTask()"
        class="w-fit text-2xl bg-gradient-to-r from-[#5fa8fb] to-[#c178e9] bg-clip-text text-transparent"
      >
        <mat-icon>edit</mat-icon>
      </button>
    </div>

    <!-- Task Info Section -->
    <div class="space-y-4 flex-1 overflow-auto">
      <div>
        <p class="text-sm uppercase tracking-wide text-gray-400">Title</p>
        <p class="text-lg font-medium text-gray-500">{{ task?.name }}</p>
      </div>

      <div class="min-h-[4.5rem]">
        <p class="text-sm uppercase tracking-wide text-gray-400">Description</p>
        <p class="leading-relaxed text-gray-500 text-justify">
          {{ task?.description }}
        </p>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <p class="text-sm uppercase tracking-wide text-gray-400">Status</p>
          <p
            class="inline-block mt-1 px-3 py-1 rounded-full text-sm font-medium"
            [ngClass]="{
              'bg-green-200/30 text-green-400/80': task?.completed,
              'bg-yellow-200/30 text-yellow-500/80': !task?.completed
            }"
          >
            {{ task?.completed ? 'Completed' : 'Incomplete' }}
          </p>
        </div>

        <div>
          <p class="text-sm uppercase tracking-wide text-gray-400">Importance</p>
          <p
            class="inline-block mt-1 px-3 py-1 rounded-full text-sm font-medium"
            [ngClass]="{
                'bg-red-200/30 text-red-400/80': task?.completed,
                'bg-green-200/30 text-green-400/80': !task?.completed,

            }"
          >
            {{ task?.important ? 'High' : 'Low' }}
          </p>
        </div>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <p class="text-sm uppercase tracking-wide text-gray-400">Category</p>
          <p class="text-gray-500">
            {{ task?.category }}
          </p>
        </div>

        <div>
          <p class="text-sm uppercase tracking-wide text-gray-400">Due Date</p>
          <p class="text-gray-500">
            {{ task?.date ? (task?.date | date : 'dd/MM/yyyy') : 'No Due Date' }}
          </p>
        </div>
      </div>

      <div class="mt-4 border-t border-white/10 pt-4 text-xs text-gray-400">
        <p>
          Created on:
          {{ task?.createdAt ? (task?.createdAt | date : 'dd/MM/yyyy') : 'No Due Date' }}
        </p>
        <p>
          Last updated:
          {{ task?.updatedAt ? (task?.updatedAt | date : 'dd/MM/yyyy') : 'No Due Date' }}
        </p>
      </div>
    </div>
  </div>
</div>
